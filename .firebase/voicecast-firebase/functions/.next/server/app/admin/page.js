(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1346:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(8748),s(1506),s(5866);var r=s(3191),i=s(8716),n=s(7922),a=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8748)),"C:\\Windsurf\\voiceCast\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Windsurf\\voiceCast\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Windsurf\\voiceCast\\app\\admin\\page.tsx"],u="/admin/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7882:(e,t,s)=>{Promise.resolve().then(s.bind(s,5040))},2534:()=>{},3551:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(326),i=s(7577);s(6791);var n=s(8996),a=s(8587),o=s(76);let l=[{id:"tech",name:"テクノロジー"},{id:"business",name:"ビジネス"},{id:"lifestyle",name:"ライフスタイル"},{id:"entertainment",name:"エンタメ"},{id:"education",name:"教育"},{id:"news",name:"ニュース"},{id:"health",name:"健康"},{id:"other",name:"その他"}];function d({user:e}){let[t,s]=(0,i.useState)(""),[a,d]=(0,i.useState)(""),[c,u]=(0,i.useState)("other"),[m,x]=(0,i.useState)(null),[p,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)(null),y=async r=>{if(r.preventDefault(),!m||!t){v({type:"error",text:"タイトルとファイルは必須です。"});return}h(!0),v({type:"success",text:"アップロードURLを取得しています..."});try{let r=await fetch("/api/upload-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:m.name,contentType:m.type})});if(!r.ok)throw Error(`署名付きURLの取得に失敗しました: ${await r.text()}`);let{url:i,key:l}=await r.json();if(v({type:"success",text:"ファイルをアップロードしています..."}),!(await fetch(i,{method:"PUT",body:m,headers:{"Content-Type":m.type}})).ok)throw Error("ファイルアップロードに失敗しました。");let p=`https://your_public_url.r2.dev/${l}`;await (0,o.ET)((0,o.hJ)(n.db,"episodes"),{title:t,description:a,genre:c,audio_url:p,user_id:e.uid,createdAt:new Date}),v({type:"success",text:"エピソードの公開に成功しました！"}),s(""),d(""),u("other"),x(null);let h=document.getElementById("file-input");h&&(h.value="")}catch(e){v({type:"error",text:`エラーが発生しました: ${e.message}`})}finally{h(!1)}};return(0,r.jsxs)("div",{className:"w-full max-w-3xl mx-auto p-8 bg-white rounded-2xl shadow-lg",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"管理ダッシュボード"}),(0,r.jsxs)("p",{className:"text-gray-500 mb-8",children:["ようこそ, ",e.email]}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"音声ファイル"}),(0,r.jsxs)("div",{onDragOver:e=>{e.preventDefault(),f(!0)},onDragLeave:e=>{e.preventDefault(),f(!1)},onDrop:e=>{e.preventDefault(),f(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(x(e.dataTransfer.files[0]),v(null))},className:`group relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
              ${g?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-indigo-400"}
            `,onClick:()=>document.getElementById("file-input")?.click(),children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 group-hover:text-indigo-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold text-indigo-600",children:"ファイルをアップロード"})," またはドラッグ＆ドロップ"]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"MP3, WAV, M4A"})]}),r.jsx("input",{type:"file",id:"file-input",accept:"audio/*",onChange:e=>{e.target.files&&e.target.files.length>0&&(x(e.target.files[0]),v(null))},className:"hidden"})]}),m&&(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"選択中のファイル:"})," ",m.name]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"タイトル"}),r.jsx("input",{type:"text",id:"title",value:t,onChange:e=>s(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"genre",className:"block text-sm font-medium text-gray-700",children:"ジャンル"}),r.jsx("select",{id:"genre",value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:l.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"説明"}),r.jsx("textarea",{id:"description",value:a,onChange:e=>d(e.target.value),rows:4,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b&&r.jsx("div",{className:`p-4 rounded-md ${"success"===b.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.jsx("p",{children:b.text})}),r.jsx("div",{className:"flex justify-end",children:(0,r.jsxs)("button",{type:"submit",disabled:p,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300 disabled:cursor-not-allowed",children:[p&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p?"公開処理中...":"エピソードを公開"]})})]})]})}function c(){let{user:e,loading:t}=function(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!0);return{user:e,loading:s}}(),s=(0,a.useRouter)(),o=async()=>{await n.I8.signOut(),s.push("/login")};return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("p",{children:"Loading..."})}):e?r.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center py-10",children:(0,r.jsxs)("div",{className:"w-full max-w-3xl",children:[r.jsx("div",{className:"flex justify-end mb-4",children:r.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"ログアウト"})}),r.jsx(d,{user:e})]})}):null}},8996:(e,t,s)=>{"use strict";s.d(t,{I8:()=>l,db:()=>d});var r=s(2585),i=s(6791),n=s(76),a=s(1552);let o=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyCI1Wy2T2ioqSPxOR2bWVswQn6Q57uLWl4",authDomain:"voicecast-firebase.firebaseapp.com",projectId:"voicecast-firebase",storageBucket:"voicecast-firebase.appspot.com",messagingSenderId:"772272144528",appId:"1:772272144528:web:5e363da48adfc8da309815"}),l=(0,i.v0)(o),d=(0,n.ad)(o);(0,a.cF)(o)},8587:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>o});var r=s(8570);let i=(0,r.createProxy)(String.raw`C:\Windsurf\voiceCast\app\admin\page.tsx`),{__esModule:n,$$typeof:a}=i;i.default;let o=(0,r.createProxy)(String.raw`C:\Windsurf\voiceCast\app\admin\page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var r=s(9510);s(7272);let i={title:"VoiceCast",description:"The best way to share your voice.",icons:{icon:"/favicon.svg"}};function n({children:e}){return r.jsx("html",{lang:"ja",children:r.jsx("body",{children:e})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,471,205],()=>s(1346));module.exports=r})();